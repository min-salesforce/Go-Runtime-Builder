<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="stylesheet" href="/css/app.css">
    <link rel="stylesheet" href="/css/questionnaire.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèóÔ∏è</text></svg>">
</head>
<body>
    <header class="app-header">
        <nav class="navbar">
            <div class="navbar-brand">
                <a href="/" class="brand-link">
                    <span class="brand-icon">üèóÔ∏è</span>
                    <span class="brand-text">Go Runtime Builder</span>
                </a>
            </div>
            <div class="navbar-nav">
                <a href="/" class="nav-link">Home</a>
                <a href="/questionnaire" class="nav-link active">Questionnaire</a>
            </div>
        </nav>
    </header>

    <main class="main-content">

<div class="questionnaire-container">
    <div class="questionnaire-sidebar">
        <h3>Progress</h3>
        <div class="progress-steps">
            <div class="progress-step active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-label">Basic Info</div>
            </div>
            <div class="progress-step" data-step="2">
                <div class="step-number">2</div>
                <div class="step-label">Experience Type</div>
            </div>
            <div class="progress-step" data-step="3">
                <div class="step-number">3</div>
                <div class="step-label">Configuration</div>
            </div>
            <div class="progress-step" data-step="4">
                <div class="step-number">4</div>
                <div class="step-label">Assets</div>
            </div>
            <div class="progress-step" data-step="5">
                <div class="step-number">5</div>
                <div class="step-label">Review & Generate</div>
            </div>
        </div>
    </div>
    
    <div class="questionnaire-main">
        <div class="questionnaire-header">
            <h1>Configuration Questionnaire</h1>
            <p>Answer the questions below to generate your Salesforce configuration screens</p>
        </div>
        
        <form id="questionnaire-form">
            <!-- Step 1: Basic Information -->
            <div class="form-step active" data-step="1">
                <h2>Basic Information</h2>
                <div class="form-group">
                    <label for="name">Feature/Solution Name *</label>
                    <input type="text" id="name" name="metadata.name" required 
                           placeholder="e.g., Authentication Suite, File Upload">
                    <small class="help-text">What is the name of your feature or solution?</small>
                </div>
                
                <div class="form-group">
                    <label for="description">Description *</label>
                    <textarea id="description" name="metadata.description" required 
                              placeholder="Brief description of what this feature or solution does"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="cloud">Salesforce Cloud *</label>
                    <select id="cloud" name="metadata.cloud" required>
                        <option value="">Select a cloud...</option>
                        <option value="Sales Cloud" selected>Sales Cloud</option>
                        <option value="Service Cloud">Service Cloud</option>
                        <option value="Marketing Cloud">Marketing Cloud</option>
                        <option value="Commerce Cloud">Commerce Cloud</option>
                        <option value="Platform">Platform</option>
                        <option value="Analytics Cloud">Analytics Cloud</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="version">Version</label>
                    <input type="text" id="version" name="metadata.version" placeholder="1.0.0">
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-primary" onclick="nextStep(1)">Next</button>
                </div>
            </div>
            
            <!-- Step 2: Experience Type -->
            <div class="form-step" data-step="2">
                <h2>Experience Type</h2>
                <p>What type of experience are you creating?</p>
                
                <div class="radio-group">
                    <label class="radio-card">
                        <input type="radio" name="experienceType" value="initial-setup">
                        <div class="radio-content">
                            <h3>Initial product setup or configuration</h3>
                            <p>Setting up a new product or configuring foundational features</p>
                        </div>
                    </label>
                    
                    <label class="radio-card">
                        <input type="radio" name="experienceType" value="feature-intro">
                        <div class="radio-content">
                            <h3>Standard feature introduction or walkthrough</h3>
                            <p>Introducing users to new or existing features</p>
                        </div>
                    </label>
                    
                    <label class="radio-card">
                        <input type="radio" name="experienceType" value="agent-setup">
                        <div class="radio-content">
                            <h3>AI agent setup, training, or deployment</h3>
                            <p>Configuring Agentforce AI agents and their capabilities</p>
                        </div>
                    </label>
                    
                    <label class="radio-card">
                        <input type="radio" name="experienceType" value="complex">
                        <div class="radio-content">
                            <h3>Complex multi-step process</h3>
                            <p>Advanced configuration requiring multiple steps or coordination</p>
                        </div>
                    </label>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="prevStep(2)">Previous</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep(2)">Next</button>
                </div>
            </div>
            
            <!-- Step 3: Configuration Details -->
            <div class="form-step" data-step="3">
                <h2>Configuration Details</h2>
                
                <!-- This will be dynamically populated based on experience type -->
                <div id="configuration-content">
                    <!-- Content populated by JavaScript -->
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="prevStep(3)">Previous</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep(3)">Next</button>
                </div>
            </div>
            
            <!-- Step 4: Assets -->
            <div class="form-step" data-step="4">
                <h2>Assets & Resources</h2>
                
                <div class="form-group">
                    <label for="screenshotFile">Screenshot Upload (Optional)</label>
                    <input type="file" id="screenshotFile" name="screenshotFile" accept="image/*">
                    <small class="help-text">Upload a screenshot for the page header. Recommended: 16:9 aspect ratio, ‚â§300KB</small>
                    <div id="screenshot-preview" class="hidden" style="margin-top: 0.5rem;">
                        <img id="screenshot-preview-img" src="" alt="Screenshot preview" style="max-width: 300px; max-height: 200px; border: 1px solid #ccc; border-radius: 4px;">
                        <div style="margin-top: 0.25rem;">
                            <button type="button" class="btn btn-sm btn-outline" onclick="removeScreenshot()">Remove</button>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="videoUrl">Video URL (Optional)</label>
                    <input type="url" id="videoUrl" name="assets.videoUrl" 
                           placeholder="https://play.vidyard.com/...">
                    <small class="help-text">Vidyard or similar video platform URL</small>
                </div>
                
                <div class="form-group">
                    <label for="helpTopicUrl">Help Topic URL (Optional)</label>
                    <input type="url" id="helpTopicUrl" name="assets.resources.helpTopicUrl" 
                           placeholder="https://help.salesforce.com/...">
                    <small class="help-text">Link to relevant Salesforce Help documentation</small>
                </div>
                
                <div class="form-group">
                    <label for="releaseNotesUrl">Release Notes URL (Optional)</label>
                    <input type="url" id="releaseNotesUrl" name="assets.resources.releaseNotesUrl" 
                           placeholder="https://help.salesforce.com/.../release-notes">
                </div>
                
                <div class="form-group">
                    <label for="blogUrl">Blog URL (Optional)</label>
                    <input type="url" id="blogUrl" name="assets.resources.blogUrl" 
                           placeholder="https://developer.salesforce.com/blogs/...">
                    <small class="help-text">Link to related 360 Blog article</small>
                </div>
                
                <div class="form-group">
                    <label>Trailhead Badges (Optional, max 3)</label>
                    <div id="trailhead-badges">
                        <div class="badge-group">
                            <input type="text" name="trailheadBadges[0].title" placeholder="Badge title">
                            <input type="text" name="trailheadBadges[0].moduleId" placeholder="Module ID">
                            <input type="url" name="trailheadBadges[0].url" placeholder="Badge URL">
                        </div>
                    </div>
                    <button type="button" class="btn btn-sm btn-secondary" onclick="addTrailheadBadge()">Add Badge</button>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="prevStep(4)">Previous</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep(4)">Next</button>
                </div>
            </div>
            
            <!-- Step 5: Review & Generate -->
            <div class="form-step" data-step="5">
                <h2>Review & Generate</h2>
                
                <div id="review-summary">
                    <!-- Populated by JavaScript -->
                </div>
                
                <div class="generation-options">
                    <label class="checkbox-label">
                        <input type="checkbox" id="openPreview" checked>
                        Open preview after generation
                    </label>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="prevStep(5)">Previous</button>
                    <button type="button" class="btn btn-primary" onclick="generatePages()">Generate Pages</button>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- Generation Modal -->
<div id="generation-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Generating Configuration Pages</h3>
        </div>
        <div class="modal-body">
            <div id="generation-status">
                <div class="loading-spinner"></div>
                <p>Validating configuration and generating pages...</p>
            </div>
            <div id="generation-results" class="hidden">
                <!-- Results will be populated here -->
            </div>
        </div>
    </div>
</div>

<script src="/js/questionnaire.js"></script>

    </main>

    <footer class="app-footer">
        <div class="footer-content">
            <p>&copy; 2024 Salesforce Go Runtime Builder</p>
            <p>Generate configuration screens following Salesforce design guidelines</p>
        </div>
    </footer>

    <script src="/js/app.js"></script>
</body>
</html>
