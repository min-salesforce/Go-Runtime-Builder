<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ title }} | Salesforce Setup</title>
    <link rel="stylesheet" href="../css/slds2-temp.css" />
    <style>
      /* Modern Salesforce admin interface styling */
      * { box-sizing: border-box; margin: 0; padding: 0; }
      
      body {
        font-family: "Segoe UI", -apple-system, BlinkMacSystemFont, "Roboto", sans-serif;
        background-color: #f3f3f3;
        color: #181818;
        line-height: 1.5;
      }

      /* Global Header */
      .global-header {
        background: #ffffff;
        border-bottom: 3px solid #1589ee;
        position: sticky;
        top: 0;
        z-index: 100;
      }

      .header-masthead {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 7px 16px;
        border-bottom: 1px solid #e1e4ea;
      }

      .header-logo {
        width: 40px;
        height: 28px;
        background: #0176d3;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 14px;
      }

      /* Main Layout */
      .main-layout {
        display: flex;
        min-height: calc(100vh - 90px);
      }

      /* Sidebar Navigation */
      .sidebar {
        width: 288px;
        background: #ffffff;
        border-right: 1px solid #aeaeae;
        display: flex;
        flex-direction: column;
      }

      .nav-item {
        display: flex;
        align-items: center;
        padding: 10px 14px;
        font-size: 13px;
        color: #181818;
        text-decoration: none;
        transition: background-color 0.15s ease;
      }

      .nav-item.active {
        background-color: #edf1f5;
        box-shadow: inset 4px 0 0 #8595ad;
      }

      /* Content Area */
      .content-area {
        flex: 1;
        display: flex;
        gap: 24px;
      }

      .main-content {
        flex: 1;
        max-width: 837px;
        padding: 24px;
      }

      .sidebar-content {
        width: 475px;
        padding: 24px 24px 24px 12px;
      }

      /* Page Header */
      .page-header {
        background: #ffffff;
        border-top: 12px solid #022ac0;
        padding: 8px 24px 24px;
        margin-bottom: 24px;
        border-radius: 8px;
      }

      .page-title {
        font-size: 42px;
        font-weight: 400;
        color: #181818;
        line-height: 1;
        margin: 0;
      }

      /* Agentforce Header */
      .agentforce-hero {
        background: linear-gradient(135deg, #1589ee 0%, #0c5cbc 100%);
        border-radius: 12px;
        padding: 32px;
        margin-bottom: 24px;
        color: white;
        box-shadow: 0 4px 12px rgba(21, 137, 238, 0.3);
      }

      .agentforce-title {
        font-size: 36px;
        font-weight: 600;
        margin-bottom: 8px;
        color: white;
      }

      .agentforce-subtitle {
        font-size: 16px;
        opacity: 0.9;
        margin-bottom: 24px;
      }

      .agentforce-badge {
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 23px;
        padding: 6px 12px;
        font-size: 12px;
        font-weight: bold;
        color: white;
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }

      /* Section Cards */
      .section-card {
        background: #ffffff;
        border: 1px solid #c9c9c9;
        border-radius: 8px;
        padding: 24px 16px;
        margin-bottom: 24px;
      }

      .section-title {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 18px;
        font-weight: 600;
        color: #181818;
      }

      .prerequisite-warning {
        background: #fef7e6;
        border-left: 4px solid #fe9339;
        padding: 16px;
        margin: 16px 0;
        border-radius: 4px;
      }

      .prerequisite-icon {
        color: #fe9339;
        font-size: 16px;
        margin-right: 8px;
      }

      .prerequisite-title {
        font-weight: 600;
        color: #181818;
        margin-bottom: 4px;
      }

      .prerequisite-message {
        font-size: 14px;
        color: #444444;
        line-height: 1.5;
      }

      /* Toggle Switch */
      .agentforce-toggle {
        display: flex;
        align-items: center;
        gap: 12px;
        margin: 16px 0;
      }

      .toggle-switch {
        position: relative;
        width: 44px;
        height: 24px;
        background: #c9c9c9;
        border-radius: 12px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      .toggle-switch.enabled {
        background: #0176d3;
      }

      .toggle-slider {
        position: absolute;
        top: 2px;
        left: 2px;
        width: 20px;
        height: 20px;
        background: white;
        border-radius: 50%;
        transition: transform 0.3s ease;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      }

      .toggle-switch.enabled .toggle-slider {
        transform: translateX(20px);
      }

      .toggle-label {
        font-size: 14px;
        font-weight: 500;
        color: #181818;
      }

      /* Agent Template Cards */
      .template-grid {
        display: grid;
        gap: 16px;
        margin-top: 16px;
        padding-left: 24px;
      }

      .template-card {
        background: #ffffff;
        border: 1px solid #c9c9c9;
        border-radius: 8px;
        transition: box-shadow 0.2s ease;
      }

      .template-card:hover {
        box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      }

      .template-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px;
        border-bottom: 1px solid #e5e5e5;
        cursor: pointer;
      }

      .template-title {
        font-size: 16px;
        font-weight: 600;
        color: #181818;
      }

      .template-expand {
        width: 24px;
        height: 24px;
        border: none;
        background: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.2s ease;
      }

      .template-expand.collapsed {
        transform: rotate(180deg);
      }

      .template-content {
        padding: 16px;
      }

      .template-description {
        font-size: 14px;
        color: #444444;
        margin-bottom: 16px;
        line-height: 1.5;
      }

      /* Step Components */
      .step-list {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .step-item {
        display: flex;
        align-items: flex-start;
        gap: 12px;
        padding: 16px 0;
        border-bottom: 1px solid #e5e5e5;
      }

      .step-item:last-child {
        border-bottom: none;
      }

      .step-indicator {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: bold;
        flex-shrink: 0;
      }

      .step-indicator.system {
        background: #0176d3;
        color: white;
      }

      .step-indicator.manual {
        background: #fe9339;
        color: white;
      }

      .step-indicator.completed {
        background: #2e844a;
        color: white;
      }

      .step-indicator.error {
        background: #ea001e;
        color: white;
      }

      .step-indicator.none {
        background: #747474;
        color: white;
      }

      .step-content {
        flex: 1;
        min-width: 0;
      }

      .step-title {
        font-size: 16px;
        font-weight: 600;
        color: #181818;
        margin-bottom: 4px;
      }

      .step-description {
        font-size: 14px;
        color: #444444;
        line-height: 1.5;
        margin-bottom: 12px;
      }

      .step-validation {
        background: #f8f9fc;
        border: 1px solid #e1e4ea;
        border-radius: 4px;
        padding: 12px;
        margin: 12px 0;
      }

      .step-validation-title {
        font-weight: 600;
        font-size: 14px;
        color: #181818;
        margin-bottom: 4px;
      }

      .step-validation-criteria {
        font-size: 13px;
        color: #444444;
        margin-bottom: 8px;
      }

      .step-validation-time {
        font-size: 12px;
        color: #747474;
      }

      .step-checkbox {
        display: flex;
        align-items: center;
        gap: 8px;
        margin: 12px 0;
      }

      .step-checkbox input[type="checkbox"] {
        width: 16px;
        height: 16px;
      }

      .step-checkbox label {
        font-size: 14px;
        color: #181818;
        cursor: pointer;
      }

      .step-links {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        margin-top: 12px;
      }

      .step-link {
        color: #0b5cab;
        text-decoration: none;
        font-size: 13px;
        padding: 4px 8px;
        border-radius: 4px;
        transition: background-color 0.2s ease;
      }

      .step-link:hover {
        background-color: #f8f9fc;
        text-decoration: underline;
      }

      .step-badge {
        display: inline-block;
        background: #fe9339;
        color: white;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 500;
        margin-top: 8px;
      }

      /* Performance Metrics */
      .metrics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
        padding-left: 24px;
      }

      .metric-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px;
        border: 1px solid #e5e5e5;
        border-radius: 8px;
        background: linear-gradient(135deg, #fafbfc 0%, #ffffff 100%);
      }

      .metric-name {
        font-size: 14px;
        color: #181818;
        font-weight: 500;
      }

      .metric-value {
        font-size: 16px;
        color: #0176d3;
        font-weight: 600;
      }

      /* Disclaimer Section */
      .disclaimer-card {
        background: linear-gradient(135deg, #f8f9fc 0%, #ffffff 100%);
        border-left: 4px solid #fe9339;
      }

      .disclaimer-list {
        padding-left: 24px;
      }

      .disclaimer-item {
        margin-bottom: 12px;
      }

      .disclaimer-category {
        font-weight: 600;
        color: #181818;
        font-size: 14px;
        margin-right: 8px;
      }

      .disclaimer-text {
        color: #444444;
        font-size: 14px;
        line-height: 1.5;
      }

      /* Resource Cards */
      .resource-card {
        background: #ffffff;
        border: 1px solid #c9c9c9;
        border-radius: 8px;
        box-shadow: 0 2px 2px rgba(0,0,0,0.1);
        padding: 24px;
        margin-bottom: 16px;
      }

      .resource-title {
        font-size: 18px;
        font-weight: 600;
        color: #181818;
        margin-bottom: 16px;
      }

      /* Responsive Design */
      @media (max-width: 1024px) {
        .main-layout { flex-direction: column; }
        .sidebar { width: 100%; order: 2; }
        .content-area { flex-direction: column; }
        .sidebar-content { width: 100%; padding: 24px; }
        .template-grid { grid-template-columns: 1fr; }
        .metrics-grid { grid-template-columns: 1fr; }
      }

      @media (max-width: 768px) {
        .page-title { font-size: 32px; }
        .agentforce-title { font-size: 28px; }
        .agentforce-hero { padding: 24px; }
      }

      /* Ownership Toggle Styles */
      .edit-controls {
        position: fixed;
        bottom: 24px;
        right: 24px;
        display: flex;
        flex-direction: column;
        gap: 12px;
        z-index: 1000;
      }

      .ownership-toggle-btn {
        background: #6c757d;
        color: #fff;
        border: none;
        padding: 12px 20px;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        min-width: 140px;
      }

      .ownership-toggle-btn:hover {
        background: #5a6268;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      }

      .ownership-toggle-btn.unowned {
        background: #dc3545;
      }

      .ownership-toggle-btn.unowned:hover {
        background: #c82333;
      }

      /* Unowned State Styles */
      .page-header.unowned {
        background: linear-gradient(135deg, #ffffff 0%, #f8fbff 100%) !important;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
        border-bottom: 2px solid #e8f4fd !important;
      }

      .page-header.unowned .page-title {
        color: #181818 !important;
        font-feature-settings: 'liga' off, 'clig' off !important;
        /* Use default font stack instead of forcing Segoe UI */
        font-size: 42px !important;
        font-style: normal !important;
        font-weight: 400 !important;
        line-height: 42px !important;
        /* Remove flex layout to allow inline text flow */
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.05) !important;
      }

      /* Lock icon using ::after pseudo-element for inline text flow */
      .page-header.unowned .page-title::after {
        content: '';
        display: inline-block;
        width: 36px;
        height: 36px;
        margin-left: 12px;
        background-image: url('data:image/svg+xml;charset=utf-8,<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.07656 8.76723H6.92271C7.19964 8.76723 7.38425 8.62877 7.38425 8.35186V8.3057C7.38425 5.67501 9.64579 3.50584 12.3227 3.69045C14.7689 3.87506 16.615 5.99808 16.615 8.49031V8.35186C16.615 8.62877 16.7996 8.76723 17.0766 8.76723H18.9227C19.1996 8.76723 19.3843 8.62877 19.3843 8.35186V8.3057C19.3843 4.10583 15.8766 0.736694 11.6304 0.921304C7.70733 1.10591 4.70733 4.42889 4.61502 8.35186C4.66117 8.58262 4.84579 8.76723 5.07656 8.76723ZM4.61511 8.35303V8.53764V8.35303ZM21.2306 12.461C21.2306 11.4456 20.3998 10.6148 19.3844 10.6148H4.6152C3.59981 10.6148 2.76904 11.4456 2.76904 12.461V21.2308C2.76904 22.2462 3.59981 23.0771 4.6152 23.0771H19.3844C20.3998 23.0771 21.2306 22.2462 21.2306 21.2308V12.461ZM14.1228 19.706C14.2151 19.9829 13.9844 20.306 13.6613 20.306H10.2921C9.96898 20.306 9.78436 20.0291 9.83052 19.706L10.6613 16.9368C9.96898 16.4753 9.5536 15.6446 9.69206 14.7215C9.87667 13.8446 10.569 13.1523 11.4921 12.9677C12.969 12.6908 14.2613 13.7523 14.2613 15.1369C14.2613 15.8753 13.8921 16.5676 13.2921 16.9368L14.1228 19.706Z" fill="%23181818"/></svg>');
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        vertical-align: baseline;
        /* Remove blue drop shadow to match text color exactly */
      }

      .unowned-links {
        display: none;
        gap: 16px !important; /* Match .section-links gap */
        font-size: 12px !important; /* Match .section-links font-size */
        margin: 16px 0 !important;
        flex-wrap: wrap;
      }

      .page-header.unowned .unowned-links {
        display: flex !important;
      }

      .unowned-links a {
        color: #0B5CAB !important; /* Match .section-links color */
        text-decoration: none !important;
        display: flex !important;
        align-items: center !important;
        gap: 6px !important; /* Match .section-links a gap for icon spacing */
        transition: all 0.2s ease !important;
        padding: 4px 8px !important;
        border-radius: 4px !important;
      }

      .unowned-links a:hover {
        background-color: #f3f9ff !important;
        text-decoration: underline !important;
        transform: translateY(-1px) !important;
      }

      .view-setup-btn {
        display: none; /* Hidden by default, shown in unowned state */
      }

      .page-header.unowned .view-setup-btn {
        display: flex !important;
        height: 32px !important;
        padding: 1px 16px !important;
        justify-content: center !important;
        align-items: center !important;
        gap: 10px !important;
        border-radius: 4px !important;
        background: var(--Foundation-Blue-Blue-50, #0176D3) !important;
        color: white !important;
        border: none !important;
        font-size: 14px !important;
        font-weight: 600 !important;
        text-decoration: none !important;
        cursor: pointer !important;
        box-shadow: 0 2px 8px rgba(1, 118, 211, 0.2) !important;
        transition: all 0.2s ease !important;
      }

      .view-setup-btn:hover {
        background: #0056b3 !important;
        transform: translateY(-1px) !important;
        box-shadow: 0 4px 12px rgba(1, 118, 211, 0.3) !important;
      }
    </style>
  </head>
  <body>
    <!-- Global Header -->
    <div class="global-header">
      <div class="header-masthead">
        <div class="header-logo">SF</div>
        <div style="flex: 1; text-align: center;">
          <div style="display: inline-flex; align-items: center; background: #ffffff; border: 1px solid #c9c9c9; border-radius: 4px;">
            <div style="padding: 8px 12px; border-right: 1px solid #c9c9c9; font-size: 12px; color: #3e3e3c;">All</div>
            <div style="padding: 8px 12px; font-size: 13px; color: #706e6b; display: flex; align-items: center; gap: 8px;">
              <span>üîç</span>
              Search Salesforce
            </div>
          </div>
        </div>
        <div style="display: flex; align-items: center; gap: 16px; font-size: 12px;">
          <span>‚ö°</span><span>üîî</span><span>üéØ</span><span>üìä</span><span>‚öôÔ∏è</span><span>üë§</span>
        </div>
      </div>
      
      <div style="display: flex; align-items: center; gap: 24px; padding: 0 16px; height: 37px;">
        <span>üè†</span>
        <span style="font-size: 18px; font-weight: 400; color: #000000;">Setup</span>
        <a href="#" style="background: #eef4ff; padding: 8px 12px; border-radius: 4px; font-weight: 500; color: #181818; text-decoration: none; box-shadow: inset 0 -3px 0 #1589ee;">Home</a>
        <div style="flex: 1; background: #ffffff; border: 1px solid #d4dbe6; border-radius: 4px; height: 21px; padding: 0 14px; display: flex; align-items: center; justify-content: space-between;">
          <div style="width: 88px; height: 8px; background: #d4dbe6; border-radius: 20px;"></div>
          <span>‚åÑ</span>
        </div>
      </div>
    </div>

    <!-- Main Layout -->
    <div class="main-layout">
      <!-- Sidebar -->
      <div class="sidebar">
        <div style="padding: 16px; border-bottom: 1px solid #e5e5e5;">
          <input type="text" style="width: 100%; height: 36px; padding: 8px 12px 8px 40px; border: 1px solid #e1e4ea; border-radius: 4px; font-size: 14px;" placeholder="">
        </div>
        
        <div style="flex: 1; padding-bottom: 40px;">
          <a href="#" class="nav-item">Setup Home</a>
          <a href="#" class="nav-item active">Salesforce Go</a>
          
          <div style="display: flex; align-items: center; padding: 10px 14px; font-size: 11px; color: #181818; font-weight: 600; letter-spacing: 0.5px; text-transform: uppercase;">ADMINISTRATION</div>
          <a href="#" class="nav-item">‚ñ∂ Users</a>
          <a href="#" class="nav-item">‚ñ∂ Data</a>
          <a href="#" class="nav-item">‚ñ∂ Email</a>
          
          <div style="display: flex; align-items: center; padding: 10px 14px; font-size: 11px; color: #181818; font-weight: 600; letter-spacing: 0.5px; text-transform: uppercase;">PLATFORM TOOLS</div>
          <a href="#" class="nav-item">‚ñ∂ Apps</a>
          <a href="#" class="nav-item">‚ñ∂ Feature Settings</a>
          <a href="#" class="nav-item">‚ñ∂ Slack</a>
          <a href="#" class="nav-item">‚ñ∂ Heroku</a>
          <a href="#" class="nav-item">‚ñ∂ MuleSoft</a>
          <a href="#" class="nav-item">‚ñ∂ Einstein</a>
        </div>
      </div>

      <!-- Content Area -->
      <div class="content-area">
        <!-- Main Content -->
        <div class="main-content">
          <!-- Page Header -->
          <div class="page-header">
            <div style="display: flex; align-items: center; gap: 3px; font-size: 14px; margin-bottom: 8px; flex-wrap: wrap;">
              <a href="#" style="color: #0b5cab; text-decoration: none;">Salesforce Go</a>
              <span style="color: #0b5cab; margin: 0 3px;">></span>
              <span style="color: #181818;">{{ title }}</span>
            </div>

            <div style="display: flex; align-items: center; gap: 4px; margin-bottom: 12px; font-size: 14px; color: #181818;">
              <div style="width: 24px; height: 24px; background: #1589ee; border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 10px;">AI</div>
              <span>Agentforce</span>
            </div>

            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
              <h1 class="page-title">{{ title }}</h1>
              <div style="width: 29px; height: 29px; border: 1px solid #c9c9c9; background: #ffffff; border-radius: 4px; display: flex; align-items: center; justify-content: center; cursor: pointer;">‚åÑ</div>
            </div>

            <p style="font-size: 14px; color: #181818; line-height: 1.5; margin-bottom: 16px;">{{ description }}</p>

            <!-- Unowned State Content -->
            <div class="unowned-links">
              <a href="#">Learn More</a>
              <a href="#">Prerequisites</a>
              <a href="#">Agent Requirements</a>
              <a href="#">Documentation</a>
            </div>
            <button class="view-setup-btn">View Setup Options</button>

            <div style="display: flex; justify-content: space-between; align-items: center;">
              <div style="display: flex; align-items: center; gap: 16px;">
                {% if labels.header.progressBadge %}
                <span style="background: #ffffff; border: 1px solid #c9c9c9; border-radius: 23px; padding: 4px 8px; font-size: 12px; font-weight: bold; color: #181818;">{{ labels.header.progressBadge }}</span>
                {% endif %}
                <button style="background: #ffffff; border: none; border-radius: 4px; padding: 4px 16px; font-size: 13px; color: #0176d3; cursor: pointer; display: flex; align-items: center; gap: 8px; height: 32px;">üîÑ Refresh</button>
              </div>
              <div style="background: #ddd0ff; border-radius: 23px; padding: 4px 8px; font-size: 12px; font-weight: bold; color: #181818; display: flex; align-items: center; gap: 4px;">ü§ñ AI-Powered</div>
            </div>
          </div>

          <!-- Agentforce Hero Section -->
          <div class="agentforce-hero">
            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
              <div>
                <h2 class="agentforce-title">{{ labels.header.agentforceTitle | default(title) }}</h2>
                <p class="agentforce-subtitle">{{ labels.header.agentforceSubtitle | default('AI-Powered Agent Configuration') }}</p>
                {% if labels.header.progressBadge %}
                <div class="agentforce-badge">
                  üéØ {{ labels.header.progressBadge }}
                </div>
                {% endif %}
              </div>
            </div>
          </div>
      
          <!-- Turn on Agentforce Section -->
          <div class="section-card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
              <div class="section-title">
                <span>ü§ñ</span>
                {{ labels.activation.title | default('Turn on Agentforce') }}
              </div>
              <div style="display: flex; align-items: center; gap: 8px;">
                {% if agentforceToggleable %}
                <div class="agentforce-toggle">
                  <div class="toggle-switch {% if agentforceOn %}enabled{% endif %}">
                    <div class="toggle-slider"></div>
                  </div>
                  <span class="toggle-label">{{ labels.activation.toggleLabel | default('Enable Agentforce') }}</span>
                </div>
                {% else %}
                <button class="setup-button">{{ labels.activation.button.notStarted | default('Turn On Agentforce') }}</button>
                {% endif %}
              </div>
            </div>

            {% if not agentforceOn %}
            <div class="prerequisite-warning">
              <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                <span class="prerequisite-icon">‚ö†Ô∏è</span>
                <div class="prerequisite-title">Prerequisites Required</div>
              </div>
              <div class="prerequisite-message">{{ labels.activation.prerequisiteMessage | default('Salesforce Foundations must be activated before enabling Agentforce.') }}</div>
            </div>
            {% endif %}

            <div style="font-size: 14px; color: #444444; margin-bottom: 16px; padding-left: 24px;">
              Enable AI-powered agents to automate customer service and support workflows.
            </div>

            <div style="padding-left: 24px;">
              <div style="display: flex; gap: 16px; flex-wrap: wrap;">
                {% if labels.activation.previewDefaultsLabel %}
                <a href="#" style="color: #0b5cab; text-decoration: none; font-size: 13px; padding: 4px 8px; border-radius: 4px;">{{ labels.activation.previewDefaultsLabel }}</a>
                {% endif %}
                {% if labels.activation.seeConsiderationsLabel %}
                <a href="#" style="color: #0b5cab; text-decoration: none; font-size: 13px; padding: 4px 8px; border-radius: 4px;">{{ labels.activation.seeConsiderationsLabel }}</a>
                {% endif %}
                {% if labels.activation.setupHelpLabel %}
                <a href="#" style="color: #0b5cab; text-decoration: none; font-size: 13px; padding: 4px 8px; border-radius: 4px;">{{ labels.activation.setupHelpLabel }}</a>
                {% endif %}
              </div>
            </div>
          </div>

          <!-- Agent Template Section -->
          <div class="section-card">
            <div class="section-title">
              <span>üéØ</span>
              {{ labels.templates.sectionTitle | default('Agent Templates') }}
            </div>
            
            <div style="font-size: 14px; color: #444444; margin-bottom: 16px; padding-left: 24px;">
              {{ labels.templates.sectionDescription | default('Configure your agent templates with the steps below.') }}
            </div>

            <!-- Agent Template Cards -->
            {% if agentforce.templates and agentforce.templates.length > 0 %}
            <div class="template-grid">
              {% for template in agentforce.templates %}
              <div class="template-card">
                <div class="template-header" onclick="toggleTemplate({{ loop.index0 }})">
                  <div class="template-title">{{ template.name }}</div>
                  <button class="template-expand {% if agentforceOn %}collapsed{% endif %}" id="expand-{{ loop.index0 }}">
                    ‚ñº
                  </button>
                </div>
                
                <div class="template-content" id="content-{{ loop.index0 }}" style="{% if agentforceOn %}display: none;{% endif %}">
                  {% if template.description %}
                  <div class="template-description">{{ template.description }}</div>
                  {% endif %}

                  <!-- Template Steps -->
                  {% if template.steps and template.steps.length > 0 %}
                  <div class="step-list">
                    {% for step in template.steps %}
                    <div class="step-item">
                      <div class="step-indicator {{ step.validation }}">
                        {% if step.status === 'completed' %}‚úì
                        {% elif step.status === 'error' %}‚úó
                        {% elif step.validation === 'system' %}S
                        {% elif step.validation === 'manual' %}M
                        {% else %}{{ loop.index }}
                        {% endif %}
                      </div>
                      
                      <div class="step-content">
                        <div class="step-title">{{ step.title }}</div>
                        {% if step.description %}
                        <div class="step-description">{{ step.description }}</div>
                        {% endif %}
                        
                        {% if step.validation === 'system' and step.systemValidation %}
                        <div class="step-validation">
                          <div class="step-validation-title">System Validation</div>
                          <div class="step-validation-criteria">{{ step.systemValidation.criteria }}</div>
                          {% if step.systemValidation.lastCheck %}
                          <div class="step-validation-time">Last checked: {{ step.systemValidation.lastCheck }}</div>
                          {% endif %}
                        </div>
                        {% endif %}
                        
                        {% if step.validation === 'manual' %}
                        <div class="step-checkbox">
                          <input type="checkbox" id="step-{{ template.name | replace(' ', '-') }}-{{ loop.index0 }}" {% if step.completed %}checked{% endif %} />
                          <label for="step-{{ template.name | replace(' ', '-') }}-{{ loop.index0 }}">Mark as complete</label>
                        </div>
                        {% endif %}
                        
                        {% if step.links and step.links.length > 0 %}
                        <div class="step-links">
                          {% for link in step.links %}
                          <a class="step-link" href="{{ link.url }}">{{ link.label | default('Supporting Link') }}</a>
                          {% endfor %}
                        </div>
                        {% endif %}
                        
                        {% if step.badge %}
                        <div class="step-badge">{{ step.badge }}</div>
                        {% endif %}
                      </div>
                    </div>
                    {% endfor %}
                    
                    <!-- Embedded Resource within template -->
                    {% if template.embeddedResource %}
                    <div style="border-top: 1px solid #e5e5e5; padding-top: 16px; margin-top: 16px;">
                      <div style="font-size: 16px; font-weight: 600; color: #181818; margin-bottom: 8px;">{{ template.embeddedResource.title | default('Resources') }}</div>
                      <div class="step-links">
                        {% if template.embeddedResource.links %}
                        {% for link in template.embeddedResource.links %}
                        <a class="step-link" href="{{ link.url }}">{{ link.label }}</a>
                        {% endfor %}
                        {% endif %}
                      </div>
                    </div>
                    {% endif %}
                  </div>
                  {% endif %}
                </div>
              </div>
              {% endfor %}
            </div>
            {% endif %}
          </div>

          <!-- AI/Agent Disclaimers -->
          {% if labels.disclaimers %}
          <div class="section-card disclaimer-card">
            <div class="section-title">
              <span>‚ö†Ô∏è</span>
              {{ labels.disclaimers.title | default('Important Considerations') }}
            </div>
            
            <div class="disclaimer-list">
              {% for disclaimer in labels.disclaimers.items %}
              <div class="disclaimer-item">
                <span class="disclaimer-category">{{ disclaimer.category }}:</span>
                <span class="disclaimer-text">{{ disclaimer.text }}</span>
              </div>
              {% endfor %}
            </div>
          </div>
          {% endif %}

          <!-- Performance Expectations -->
          {% if labels.performance %}
          <div class="section-card">
            <div class="section-title">
              <span>üìä</span>
              {{ labels.performance.title | default('Performance Expectations') }}
            </div>
            
            <div style="font-size: 14px; color: #444444; margin-bottom: 16px; padding-left: 24px;">
              Key performance metrics and benchmarks for your Agentforce implementation.
            </div>

            <div class="metrics-grid">
              {% for metric in labels.performance.metrics %}
              <div class="metric-item">
                <div class="metric-name">{{ metric.name }}</div>
                <div class="metric-value">{{ metric.value }}</div>
              </div>
              {% endfor %}
            </div>
          </div>
          {% endif %}
        </div>

        <!-- Right Sidebar -->
        <div class="sidebar-content">
          <!-- Screenshot Display -->
          {% if assets.screenshotUrl or assets.screenshotDataUrl %}
          <div class="resource-card">
            <div class="resource-title">Agentforce Preview</div>
            <div style="width: 100%; height: 200px; background: #f3f3f3; border-radius: 8px; background-image: url('{{ assets.screenshotDataUrl or assets.screenshotUrl }}'); background-size: cover; background-position: center;"></div>
          </div>
          {% endif %}

          <!-- Resources -->
          <div class="resource-card">
            <div class="resource-title">Resources</div>
            {% if assets.resources.helpTopicUrl or assets.resources.releaseNotesUrl or assets.resources.trailheadBadges or assets.resources.blogUrl %}
            <div style="list-style: none; padding: 0; margin: 0;">
              {% if assets.resources.helpTopicUrl %}
              <div style="margin-bottom: 12px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: #0176d3; font-weight: 600;">‚Üí</span>
                <a href="{{ assets.resources.helpTopicUrl }}" style="color: #0b5cab; text-decoration: none; font-size: 14px; line-height: 1.5;">{{ labels.resources.helpLabel | default('Agentforce Documentation') }}</a>
              </div>
              {% endif %}
              {% if assets.resources.releaseNotesUrl %}
              <div style="margin-bottom: 12px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: #0176d3; font-weight: 600;">‚Üí</span>
                <a href="{{ assets.resources.releaseNotesUrl }}" style="color: #0b5cab; text-decoration: none; font-size: 14px; line-height: 1.5;">{{ labels.resources.releaseNotesLabel | default('Latest Agentforce Updates') }}</a>
              </div>
              {% endif %}
              {% if assets.resources.trailheadBadges and assets.resources.trailheadBadges.length > 0 %}
              <div style="margin-bottom: 12px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: #0176d3; font-weight: 600;">‚Üí</span>
                <strong>Trailhead:</strong>
                <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px;">
                  {% for badge in assets.resources.trailheadBadges %}
                  <a href="{{ badge.url }}" style="color: #0b5cab; text-decoration: none; font-size: 14px; line-height: 1.5;">{{ badge.title }}</a>
                  {% endfor %}
                </div>
              </div>
              {% endif %}
              {% if assets.resources.blogUrl %}
              <div style="margin-bottom: 12px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: #0176d3; font-weight: 600;">‚Üí</span>
                <a href="{{ assets.resources.blogUrl }}" style="color: #0b5cab; text-decoration: none; font-size: 14px; line-height: 1.5;">{{ labels.resources.blogLabel | default('Read the Agentforce Blog') }}</a>
              </div>
              {% endif %}
            </div>
            {% else %}
            <div style="color: #747474; font-style: italic; text-align: center; padding: 16px;">No additional resources provided</div>
            {% endif %}
          </div>

          <!-- Agentforce Guide -->
          <div class="resource-card">
            <div class="resource-title">Agentforce Setup Guide</div>
            <div style="margin-bottom: 12px; padding-left: 20px; position: relative;">
              <span style="position: absolute; left: 0; color: #0176d3; font-weight: 600;">‚Üí</span>
              <a href="#" style="color: #0b5cab; text-decoration: none; font-size: 14px; line-height: 1.5;">Agent Configuration</a>
            </div>
            <div style="margin-bottom: 12px; padding-left: 20px; position: relative;">
              <span style="position: absolute; left: 0; color: #0176d3; font-weight: 600;">‚Üí</span>
              <a href="#" style="color: #0b5cab; text-decoration: none; font-size: 14px; line-height: 1.5;">Training & Testing</a>
            </div>
            <div style="margin-bottom: 12px; padding-left: 20px; position: relative;">
              <span style="position: absolute; left: 0; color: #0176d3; font-weight: 600;">‚Üí</span>
              <a href="#" style="color: #0b5cab; text-decoration: none; font-size: 14px; line-height: 1.5;">Deployment Checklist</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Ownership Toggle Controls -->
    <div class="edit-controls">
      <button id="ownership-toggle" class="ownership-toggle-btn">
        üîí Unowned State
      </button>
    </div>

    <script>
      // Template toggle functionality
      function toggleTemplate(index) {
        const content = document.getElementById('content-' + index);
        const expand = document.getElementById('expand-' + index);
        
        if (content.style.display === 'none') {
          content.style.display = 'block';
          expand.classList.remove('collapsed');
        } else {
          content.style.display = 'none';
          expand.classList.add('collapsed');
        }
      }

      // Ownership toggle functionality
      let isUnowned = false;

      function toggleOwnershipState() {
        isUnowned = !isUnowned;
        const body = document.body;
        const header = document.querySelector('.page-header');
        const ownershipToggle = document.getElementById('ownership-toggle');

        if (isUnowned) {
          body.classList.add('unowned');
          header.classList.add('unowned');
          ownershipToggle.classList.add('unowned');
          ownershipToggle.textContent = 'üîì Owned State';
          console.log('üîÑ AGENT UNOWNED STATE APPLIED');
        } else {
          body.classList.remove('unowned');
          header.classList.remove('unowned');
          ownershipToggle.classList.remove('unowned');
          ownershipToggle.textContent = 'üîí Unowned State';
          console.log('üîÑ AGENT OWNED STATE APPLIED');
        }
      }

      document.addEventListener('DOMContentLoaded', function() {
        setTimeout(function() {
          const ownershipToggle = document.getElementById('ownership-toggle');
          if (ownershipToggle) {
            ownershipToggle.addEventListener('click', function(e) {
              e.preventDefault();
              toggleOwnershipState();
            });
          }
        }, 100);
      });
    </script>
  </body>
</html>
